import React, { useState, useMemo } from 'react'

const StatusCard = ({ count, label, description, color }) => (
  <div className="flex-1 min-w-[245px] border-[3px] border-[#EBEBEB] rounded-2xl p-6">
    <div className="flex items-center gap-3 mb-4">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
        <path d="M17.8125 3.75V16.25C17.8125 16.6644 17.6478 17.0618 17.3548 17.3549C17.0618 17.6479 16.6644 17.8125 16.25 17.8125H10.9375C10.6888 17.8125 10.4504 17.7137 10.2746 17.5379C10.0987 17.3621 9.99997 17.1236 9.99997 16.875C9.99997 16.6264 10.0987 16.3879 10.2746 16.2121C10.4504 16.0363 10.6888 15.9375 10.9375 15.9375H15.9375V4.0625H4.06247V10.9375C4.06247 11.1861 3.96369 11.4246 3.78788 11.6004C3.61206 11.7762 3.37361 11.875 3.12497 11.875C2.87633 11.875 2.63787 11.7762 2.46205 11.6004C2.28624 11.4246 2.18747 11.1861 2.18747 10.9375V3.75C2.18747 3.3356 2.35209 2.93817 2.64511 2.64515C2.93814 2.35212 3.33557 2.1875 3.74997 2.1875H16.25C16.6644 2.1875 17.0618 2.35212 17.3548 2.64515C17.6478 2.93817 17.8125 3.3356 17.8125 3.75ZM10.0382 11.8367C9.95115 11.7493 9.84766 11.68 9.7337 11.6327C9.61975 11.5853 9.49757 11.561 9.37418 11.561C9.2508 11.561 9.12862 11.5853 9.01467 11.6327C8.90071 11.68 8.79722 11.7493 8.71012 11.8367L4.99997 15.5469L3.78825 14.3367C3.70104 14.2495 3.59751 14.1803 3.48357 14.1331C3.36963 14.0859 3.24751 14.0617 3.12418 14.0617C3.00086 14.0617 2.87874 14.0859 2.7648 14.1331C2.65086 14.1803 2.54733 14.2495 2.46012 14.3367C2.37292 14.4239 2.30374 14.5275 2.25655 14.6414C2.20935 14.7553 2.18506 14.8775 2.18506 15.0008C2.18506 15.1241 2.20935 15.2462 2.25655 15.3602C2.30374 15.4741 2.37292 15.5776 2.46012 15.6648L4.33512 17.5398C4.42222 17.6272 4.52571 17.6966 4.63967 17.7439C4.75362 17.7912 4.8758 17.8156 4.99918 17.8156C5.12257 17.8156 5.24475 17.7912 5.3587 17.7439C5.47266 17.6966 5.57615 17.6272 5.66325 17.5398L10.0382 13.1648C10.1256 13.0777 10.195 12.9743 10.2423 12.8603C10.2896 12.7463 10.314 12.6242 10.314 12.5008C10.314 12.3774 10.2896 12.2552 10.2423 12.1413C10.195 12.0273 10.1256 11.9238 10.0382 11.8367Z" fill="currentColor" className={color}/>
      </svg>
      <span className={`text-base font-medium ${color}`}>{label}</span>
    </div>
    <div className="text-[30px] font-semibold text-black mb-2">{count}</div>
    <div className="text-base font-medium text-[#686262]">{description}</div>
  </div>
)

const WorkOrderCard = ({ order, onAssignClick }) => {
  const statusColors = {
    Pending: 'text-[#CDD0D7] bg-[#CDD0D7]',
    Assigned: 'text-[#0FC3EB] bg-[#0FC3EB]',
    'In Progress': 'text-[#EBB80F] bg-[#EBB80F]',
    Completed: 'text-[#54C020] bg-[#54C020]',
  }

  const priorityColors = {
    HIGH: 'bg-[#FFE4E4] text-[#FF3232]',
    MEDIUM: 'bg-[#FFF1C9] text-[#E29A00]',
    LOW: 'bg-[#EFEFEF] text-[#717171]',
  }

  return (
    <div className="bg-white border border-[#DEE1E6] rounded-2xl shadow-[0_4px_16px_3px_rgba(173,173,173,0.12)] overflow-hidden">
      <div className="p-6">
        {/* Header */}
        <div className="flex items-start gap-3 mb-4">
          <div className="w-9 h-9 rounded-xl bg-[#E1E3FF] flex items-center justify-center flex-shrink-0">
            <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M23.0469 10.5469H20.8008L16.6826 6.43165C16.5017 6.24966 16.2866 6.10537 16.0495 6.00714C15.8125 5.90891 15.5583 5.85869 15.3018 5.85938H4.71485C4.39329 5.85944 4.07672 5.93889 3.79324 6.09068C3.50977 6.24247 3.26815 6.4619 3.08985 6.7295L0.195315 11.0684C0.0674461 11.2611 -0.000511898 11.4874 2.90329e-06 11.7188V16.4063C2.90329e-06 16.9243 0.205778 17.421 0.57206 17.7873C0.938342 18.1536 1.43513 18.3594 1.95313 18.3594H3.27149C3.48013 19.0383 3.90098 19.6325 4.47224 20.0545C5.0435 20.4766 5.73505 20.7044 6.44532 20.7044C7.15558 20.7044 7.84713 20.4766 8.41839 20.0545C8.98965 19.6325 9.4105 19.0383 9.61914 18.3594H15.3809C15.5895 19.0383 16.0104 19.6325 16.5816 20.0545C17.1529 20.4766 17.8444 20.7044 18.5547 20.7044C19.265 20.7044 19.9565 20.4766 20.5278 20.0545C21.099 19.6325 21.5199 19.0383 21.7285 18.3594H23.0469C23.5649 18.3594 24.0617 18.1536 24.4279 17.7873C24.7942 17.421 25 16.9243 25 16.4063V12.5C25 11.982 24.7942 11.4852 24.4279 11.1189C24.0617 10.7527 23.5649 10.5469 23.0469 10.5469ZM4.92383 8.20313H15.1367L17.4805 10.5469H3.36133L4.92383 8.20313ZM6.44532 18.3594C6.25217 18.3594 6.06336 18.3021 5.90277 18.1948C5.74217 18.0875 5.617 17.935 5.54309 17.7565C5.46918 17.5781 5.44984 17.3817 5.48752 17.1923C5.5252 17.0029 5.61821 16.8289 5.75478 16.6923C5.89136 16.5557 6.06536 16.4627 6.2548 16.425C6.44423 16.3873 6.64059 16.4067 6.81903 16.4806C6.99747 16.5545 7.14999 16.6797 7.2573 16.8403C7.3646 17.0009 7.42188 17.1897 7.42188 17.3828C7.42188 17.6418 7.31899 17.8902 7.13585 18.0734C6.95271 18.2565 6.70432 18.3594 6.44532 18.3594ZM18.5547 18.3594C18.3615 18.3594 18.1727 18.3021 18.0121 18.1948C17.8515 18.0875 17.7264 17.935 17.6525 17.7565C17.5786 17.5781 17.5592 17.3817 17.5969 17.1923C17.6346 17.0029 17.7276 16.8289 17.8642 16.6923C18.0007 16.5557 18.1747 16.4627 18.3642 16.425C18.5536 16.3873 18.75 16.4067 18.9284 16.4806C19.1068 16.5545 19.2594 16.6797 19.3667 16.8403C19.474 17.0009 19.5313 17.1897 19.5313 17.3828C19.5313 17.6418 19.4284 17.8902 19.2452 18.0734C19.0621 18.2565 18.8137 18.3594 18.5547 18.3594ZM22.6563 16.0156H21.582C21.3194 15.4326 20.894 14.9378 20.357 14.5907C19.82 14.2437 19.1941 14.059 18.5547 14.059C17.9153 14.059 17.2894 14.2437 16.7524 14.5907C16.2154 14.9378 15.79 15.4326 15.5273 16.0156H9.47266C9.21004 15.4326 8.78465 14.9378 8.24762 14.5907C7.71058 14.2437 7.08475 14.059 6.44532 14.059C5.80588 14.059 5.18005 14.2437 4.64301 14.5907C4.10598 14.9378 3.6806 15.4326 3.41797 16.0156H2.34375V12.8906H22.6563V16.0156Z" fill="#626AE7"/>
            </svg>
          </div>
          <div className="flex-1 min-w-0">
            <div className="flex items-start justify-between gap-2 mb-1">
              <h3 className="text-base font-semibold text-black">{order.id}</h3>
              <div className="flex flex-col items-end gap-1">
                <div className="flex items-center gap-1.5">
                  <div className={`w-2.5 h-2.5 rounded-full ${statusColors[order.status]}`}></div>
                  <span className="text-xs text-black">{order.status}</span>
                </div>
                {order.priority && (
                  <span className={`px-2.5 py-0.5 rounded-full text-[10px] font-medium ${priorityColors[order.priority]}`}>
                    {order.priority}
                  </span>
                )}
              </div>
            </div>
            <div className="text-xs text-[#929594]">{order.vehicle}</div>
          </div>
        </div>

        {/* Details */}
        <div className="space-y-2 mb-4">
          <div className="flex items-center gap-2 text-xs text-[#65758B]">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path d="M8.09375 5.90625C8.09375 5.7322 8.16289 5.56528 8.28596 5.44221C8.40903 5.31914 8.57595 5.25 8.75 5.25H10.2812C10.4553 5.25 10.6222 5.31914 10.7453 5.44221C10.8684 5.56528 10.9375 5.7322 10.9375 5.90625C10.9375 6.0803 10.8684 6.24722 10.7453 6.37029C10.6222 6.49336 10.4553 6.5625 10.2812 6.5625H8.75C8.57595 6.5625 8.40903 6.49336 8.28596 6.37029C8.16289 6.24722 8.09375 6.0803 8.09375 5.90625ZM10.2812 7.4375H9.1875C9.01345 7.4375 8.84653 7.50664 8.72346 7.62971C8.60039 7.75278 8.53125 7.9197 8.53125 8.09375C8.53125 8.2678 8.60039 8.43472 8.72346 8.55779C8.84653 8.68086 9.01345 8.75 9.1875 8.75H10.2812C10.4553 8.75 10.6222 8.68086 10.7453 8.55779C10.8684 8.43472 10.9375 8.2678 10.9375 8.09375C10.9375 7.9197 10.8684 7.75278 10.7453 7.62971C10.6222 7.50664 10.4553 7.4375 10.2812 7.4375ZM12.9062 3.0625V10.9375C12.9062 11.2276 12.791 11.5058 12.5859 11.7109C12.3808 11.916 12.1026 12.0312 11.8125 12.0312H2.1875C1.89742 12.0312 1.61922 11.916 1.4141 11.7109C1.20898 11.5058 1.09375 11.2276 1.09375 10.9375V3.0625C1.09375 2.77242 1.20898 2.49422 1.4141 2.2891C1.61922 2.08398 1.89742 1.96875 2.1875 1.96875H11.8125C12.1026 1.96875 12.3808 2.08398 12.5859 2.2891C12.791 2.49422 12.9062 2.77242 12.9062 3.0625ZM11.5938 3.28125H2.40625V10.7188H11.5938V3.28125ZM3.18719 8.71555C3.34465 8.34281 3.59394 8.01601 3.9118 7.76562C3.68648 7.47448 3.54731 7.12599 3.51009 6.75972C3.47287 6.39346 3.53909 6.0241 3.70124 5.69358C3.86338 5.36306 4.11496 5.08463 4.42739 4.88989C4.73982 4.69516 5.1006 4.59194 5.46875 4.59194C5.8369 4.59194 6.19768 4.69516 6.51011 4.88989C6.82254 5.08463 7.07412 5.36306 7.23626 5.69358C7.39841 6.0241 7.46463 6.39346 7.42741 6.75972C7.39019 7.12599 7.25102 7.47448 7.0257 7.76562C7.34373 8.01598 7.5932 8.34277 7.75086 8.71555C7.81801 8.87618 7.81861 9.05691 7.75251 9.21798C7.68641 9.37905 7.55903 9.50726 7.3984 9.57441C7.23777 9.64157 7.05704 9.64216 6.89597 9.57606C6.7349 9.50996 6.60669 9.38259 6.53953 9.22195C6.37 8.81508 5.92922 8.53125 5.46875 8.53125C5.00828 8.53125 4.56805 8.81563 4.39742 9.22195C4.36596 9.30396 4.31835 9.37881 4.25743 9.44207C4.1965 9.50534 4.12349 9.55573 4.04273 9.59026C3.96197 9.6248 3.87511 9.64277 3.78727 9.64311C3.69944 9.64345 3.61244 9.62615 3.53141 9.59225C3.45039 9.55834 3.37699 9.50852 3.31558 9.44573C3.25416 9.38294 3.20597 9.30846 3.17387 9.2267C3.14177 9.14495 3.12641 9.05758 3.1287 8.96977C3.13099 8.88197 3.15087 8.79552 3.18719 8.71555ZM4.8125 6.5625C4.8125 6.69229 4.85099 6.81917 4.9231 6.92709C4.99521 7.03501 5.0977 7.11913 5.21761 7.1688C5.33753 7.21847 5.46948 7.23146 5.59678 7.20614C5.72408 7.18082 5.84101 7.11832 5.93279 7.02654C6.02457 6.93476 6.08707 6.81783 6.11239 6.69053C6.13771 6.56323 6.12472 6.43128 6.07505 6.31136C6.02538 6.19145 5.94126 6.08896 5.83334 6.01685C5.72542 5.94474 5.59854 5.90625 5.46875 5.90625C5.2947 5.90625 5.12778 5.97539 5.00471 6.09846C4.88164 6.22153 4.8125 6.38845 4.8125 6.5625Z" fill="#65758B"/>
            </svg>
            <span>{order.vin}</span>
          </div>
          <div className="flex items-center gap-2 text-xs text-[#65758B]">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path d="M12.8178 11.4841C12.068 10.1681 10.8972 9.14276 9.49388 8.57305C10.1917 8.04965 10.7072 7.31995 10.9673 6.48731C11.2274 5.65466 11.2189 4.76128 10.9431 3.93373C10.6672 3.10617 10.138 2.38638 9.43033 1.87632C8.72267 1.36626 7.87246 1.0918 7.00013 1.0918C6.12781 1.0918 5.2776 1.36626 4.56993 1.87632C3.86226 2.38638 3.33302 3.10617 3.05717 3.93373C2.78131 4.76128 2.77284 5.65466 3.03293 6.48731C3.29303 7.31995 3.80852 8.04965 4.50638 8.57305C3.10306 9.14276 1.93226 10.1681 1.18247 11.4841C1.13602 11.5588 1.10505 11.6421 1.09142 11.729C1.07779 11.8159 1.08177 11.9046 1.10313 11.99C1.1245 12.0753 1.1628 12.1555 1.21576 12.2257C1.26873 12.296 1.33527 12.3549 1.41145 12.3989C1.48762 12.4429 1.57187 12.4711 1.65917 12.4819C1.74648 12.4927 1.83507 12.4859 1.91967 12.4617C2.00427 12.4376 2.08316 12.3967 2.15165 12.3415C2.22014 12.2863 2.27682 12.2179 2.31833 12.1403C3.30927 10.4275 5.05927 9.40594 7.00013 9.40594C8.94099 9.40594 10.691 10.428 11.6819 12.1403C11.7719 12.285 11.9146 12.389 12.0799 12.4304C12.2451 12.4717 12.42 12.4472 12.5675 12.362C12.715 12.2767 12.8236 12.1375 12.8703 11.9737C12.917 11.8098 12.8982 11.6343 12.8178 11.4841ZM4.15638 5.24969C4.15638 4.68725 4.32316 4.13744 4.63564 3.66978C4.94811 3.20213 5.39225 2.83764 5.91188 2.62241C6.4315 2.40717 7.00329 2.35085 7.55492 2.46058C8.10655 2.57031 8.61326 2.84115 9.01097 3.23885C9.40867 3.63656 9.67951 4.14327 9.78924 4.6949C9.89897 5.24653 9.84265 5.81832 9.62741 6.33794C9.41218 6.85757 9.04769 7.3017 8.58003 7.61418C8.11238 7.92665 7.56257 8.09344 7.00013 8.09344C6.24619 8.09257 5.52337 7.79268 4.99026 7.25956C4.45714 6.72644 4.15725 6.00363 4.15638 5.24969Z" fill="#65758B"/>
            </svg>
            <span>{order.customer}</span>
          </div>
          <div className="flex items-center gap-2 text-xs text-[#65758B]">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
              <path d="M11.375 1.53125H10.2812V1.3125C10.2812 1.13845 10.2121 0.971532 10.089 0.848461C9.96597 0.72539 9.79905 0.65625 9.625 0.65625C9.45095 0.65625 9.28403 0.72539 9.16096 0.848461C9.03789 0.971532 8.96875 1.13845 8.96875 1.3125V1.53125H5.03125V1.3125C5.03125 1.13845 4.96211 0.971532 4.83904 0.848461C4.71597 0.72539 4.54905 0.65625 4.375 0.65625C4.20095 0.65625 4.03403 0.72539 3.91096 0.848461C3.78789 0.971532 3.71875 1.13845 3.71875 1.3125V1.53125H2.625C2.33492 1.53125 2.05672 1.64648 1.8516 1.8516C1.64648 2.05672 1.53125 2.33492 1.53125 2.625V11.375C1.53125 11.6651 1.64648 11.9433 1.8516 12.1484C2.05672 12.3535 2.33492 12.4688 2.625 12.4688H11.375C11.6651 12.4688 11.9433 12.3535 12.1484 12.1484C12.3535 11.9433 12.4688 11.6651 12.4688 11.375V2.625C12.4688 2.33492 12.3535 2.05672 12.1484 1.8516C11.9433 1.64648 11.6651 1.53125 11.375 1.53125ZM3.71875 2.84375C3.71875 3.0178 3.78789 3.18472 3.91096 3.30779C4.03403 3.43086 4.20095 3.5 4.375 3.5C4.54905 3.5 4.71597 3.43086 4.83904 3.30779C4.96211 3.18472 5.03125 3.0178 5.03125 2.84375H8.96875C8.96875 3.0178 9.03789 3.18472 9.16096 3.30779C9.28403 3.43086 9.45095 3.5 9.625 3.5C9.79905 3.5 9.96597 3.43086 10.089 3.30779C10.2121 3.18472 10.2812 3.0178 10.2812 2.84375H11.1562V4.15625H2.84375V2.84375H3.71875ZM2.84375 11.1562V5.46875H11.1562V11.1562H2.84375ZM7.875 7C7.875 7.17306 7.82368 7.34223 7.72754 7.48612C7.63139 7.63002 7.49473 7.74217 7.33485 7.80839C7.17496 7.87462 6.99903 7.89195 6.8293 7.85819C6.65956 7.82443 6.50365 7.74109 6.38128 7.61872C6.25891 7.49635 6.17557 7.34044 6.14181 7.1707C6.10805 7.00097 6.12538 6.82504 6.19161 6.66515C6.25783 6.50527 6.36998 6.36861 6.51388 6.27246C6.65777 6.17632 6.82694 6.125 7 6.125C7.23206 6.125 7.45462 6.21719 7.61872 6.38128C7.78281 6.54538 7.875 6.76794 7.875 7ZM10.5 7C10.5 7.17306 10.4487 7.34223 10.3525 7.48612C10.2564 7.63002 10.1197 7.74217 9.95985 7.80839C9.79996 7.87462 9.62403 7.89195 9.4543 7.85819C9.28456 7.82443 9.12865 7.74109 9.00628 7.61872C8.88391 7.49635 8.80057 7.34044 8.76681 7.1707C8.73305 7.00097 8.75038 6.82504 8.81661 6.66515C8.88283 6.50527 8.99498 6.36861 9.13888 6.27246C9.28277 6.17632 9.45194 6.125 9.625 6.125C9.85706 6.125 10.0796 6.21719 10.2437 6.38128C10.4078 6.54538 10.5 6.76794 10.5 7ZM5.25 9.625C5.25 9.79806 5.19868 9.96723 5.10254 10.1111C5.00639 10.255 4.86973 10.3672 4.70985 10.4334C4.54996 10.4996 4.37403 10.5169 4.2043 10.4832C4.03456 10.4494 3.87865 10.3661 3.75628 10.2437C3.63391 10.1213 3.55057 9.96544 3.51681 9.7957C3.48305 9.62597 3.50038 9.45004 3.56661 9.29015C3.63283 9.13027 3.74498 8.99361 3.88888 8.89746C4.03277 8.80132 4.20194 8.75 4.375 8.75C4.60706 8.75 4.82962 8.84219 4.99372 9.00628C5.15781 9.17038 5.25 9.39294 5.25 9.625ZM7.875 9.625C7.875 9.79806 7.82368 9.96723 7.72754 10.1111C7.63139 10.255 7.49473 10.3672 7.33485 10.4334C7.17496 10.4996 6.99903 10.5169 6.8293 10.4832C6.65956 10.4494 6.50365 10.3661 6.38128 10.2437C6.25891 10.1213 6.17557 9.96544 6.14181 9.7957C6.10805 9.62597 6.12538 9.45004 6.19161 9.29015C6.25783 9.13027 6.36998 8.99361 6.51388 8.89746C6.65777 8.80132 6.82694 8.75 7 8.75C7.23206 8.75 7.45462 8.84219 7.61872 9.00628C7.78281 9.17038 7.875 9.39294 7.875 9.625ZM10.5 9.625C10.5 9.79806 10.4487 9.96723 10.3525 10.1111C10.2564 10.255 10.1197 10.3672 9.95985 10.4334C9.79996 10.4996 9.62403 10.5169 9.4543 10.4832C9.28456 10.4494 9.12865 10.3661 9.00628 10.2437C8.88391 10.1213 8.80057 9.96544 8.76681 9.7957C8.73305 9.62597 8.75038 9.45004 8.81661 9.29015C8.88283 9.13027 8.99498 8.99361 9.13888 8.89746C9.28277 8.80132 9.45194 8.75 9.625 8.75C9.85706 8.75 10.0796 8.84219 10.2437 9.00628C10.4078 9.17038 10.5 9.39294 10.5 9.625Z" fill="#65758B"/>
            </svg>
            <span>{order.date}</span>
          </div>
        </div>

        {/* Issue Overview */}
        <div className="bg-[#F1F3F4] rounded-2xl p-4 mb-4">
          <div className="text-xs font-semibold text-black mb-2">Issue Overview:</div>
          <p className="text-[11px] text-[#929594] leading-relaxed">{order.issue}</p>
        </div>

        {/* Technician Info or Action Button */}
        {order.status === 'Pending' ? (
          <button 
            onClick={() => onAssignClick(order)}
            className="w-full bg-[#626AE7] text-white py-3 rounded-2xl text-sm font-semibold hover:bg-[#5159d6] transition-colors"
          >
            Assign Technician
          </button>
        ) : (
          <div className="text-center">
            <span className="text-sm font-semibold">
              <span className="text-[#65758B]">Technician:</span>{' '}
              <span className="text-black">{order.technician}</span>
            </span>
          </div>
        )}
      </div>
    </div>
  )
}

const StatusIcon = ({ status }) => {
  const icons = {
    Pending: () => (
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
        <path d="M17.8125 3.75V16.25C17.8125 16.6644 17.6478 17.0618 17.3548 17.3549C17.0618 17.6479 16.6644 17.8125 16.25 17.8125H10.9375C10.6888 17.8125 10.4504 17.7137 10.2746 17.5379C10.0987 17.3621 9.99997 17.1236 9.99997 16.875C9.99997 16.6264 10.0987 16.3879 10.2746 16.2121C10.4504 16.0363 10.6888 15.9375 10.9375 15.9375H15.9375V4.0625H4.06247V10.9375C4.06247 11.1861 3.96369 11.4246 3.78788 11.6004C3.61206 11.7762 3.37361 11.875 3.12497 11.875C2.87633 11.875 2.63787 11.7762 2.46205 11.6004C2.28624 11.4246 2.18747 11.1861 2.18747 10.9375V3.75C2.18747 3.3356 2.35209 2.93817 2.64511 2.64515C2.93814 2.35212 3.33557 2.1875 3.74997 2.1875H16.25C16.6644 2.1875 17.0618 2.35212 17.3548 2.64515C17.6478 2.93817 17.8125 3.3356 17.8125 3.75ZM10.0382 11.8367C9.95115 11.7493 9.84766 11.68 9.7337 11.6327C9.61975 11.5853 9.49757 11.561 9.37418 11.561C9.2508 11.561 9.12862 11.5853 9.01467 11.6327C8.90071 11.68 8.79722 11.7493 8.71012 11.8367L4.99997 15.5469L3.78825 14.3367C3.70104 14.2495 3.59751 14.1803 3.48357 14.1331C3.36963 14.0859 3.24751 14.0617 3.12418 14.0617C3.00086 14.0617 2.87874 14.0859 2.7648 14.1331C2.65086 14.1803 2.54733 14.2495 2.46012 14.3367C2.37292 14.4239 2.30374 14.5275 2.25655 14.6414C2.20935 14.7553 2.18506 14.8775 2.18506 15.0008C2.18506 15.1241 2.20935 15.2462 2.25655 15.3602C2.30374 15.4741 2.37292 15.5776 2.46012 15.6648L4.33512 17.5398C4.42222 17.6272 4.52571 17.6966 4.63967 17.7439C4.75362 17.7912 4.8758 17.8156 4.99918 17.8156C5.12257 17.8156 5.24475 17.7912 5.3587 17.7439C5.47266 17.6966 5.57615 17.6272 5.66325 17.5398L10.0382 13.1648C10.1256 13.0777 10.195 12.9743 10.2423 12.8603C10.2896 12.7463 10.314 12.6242 10.314 12.5008C10.314 12.3774 10.2896 12.2552 10.2423 12.1413C10.195 12.0273 10.1256 11.9238 10.0382 11.8367Z" fill="#727674"/>
      </svg>
    ),
    Assigned: () => (
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
        <path d="M17.8125 3.75V16.25C17.8125 16.6644 17.6478 17.0618 17.3548 17.3549C17.0618 17.6479 16.6644 17.8125 16.25 17.8125H10.9375C10.6888 17.8125 10.4504 17.7137 10.2746 17.5379C10.0987 17.3621 9.99997 17.1236 9.99997 16.875C9.99997 16.6264 10.0987 16.3879 10.2746 16.2121C10.4504 16.0363 10.6888 15.9375 10.9375 15.9375H15.9375V4.0625H4.06247V10.9375C4.06247 11.1861 3.96369 11.4246 3.78788 11.6004C3.61206 11.7762 3.37361 11.875 3.12497 11.875C2.87633 11.875 2.63787 11.7762 2.46205 11.6004C2.28624 11.4246 2.18747 11.1861 2.18747 10.9375V3.75C2.18747 3.3356 2.35209 2.93817 2.64511 2.64515C2.93814 2.35212 3.33557 2.1875 3.74997 2.1875H16.25C16.6644 2.1875 17.0618 2.35212 17.3548 2.64515C17.6478 2.93817 17.8125 3.3356 17.8125 3.75ZM10.0382 11.8367C9.95115 11.7493 9.84766 11.68 9.7337 11.6327C9.61975 11.5853 9.49757 11.561 9.37418 11.561C9.2508 11.561 9.12862 11.5853 9.01467 11.6327C8.90071 11.68 8.79722 11.7493 8.71012 11.8367L4.99997 15.5469L3.78825 14.3367C3.70104 14.2495 3.59751 14.1803 3.48357 14.1331C3.36963 14.0859 3.24751 14.0617 3.12418 14.0617C3.00086 14.0617 2.87874 14.0859 2.7648 14.1331C2.65086 14.1803 2.54733 14.2495 2.46012 14.3367C2.37292 14.4239 2.30374 14.5275 2.25655 14.6414C2.20935 14.7553 2.18506 14.8775 2.18506 15.0008C2.18506 15.1241 2.20935 15.2462 2.25655 15.3602C2.30374 15.4741 2.37292 15.5776 2.46012 15.6648L4.33512 17.5398C4.42222 17.6272 4.52571 17.6966 4.63967 17.7439C4.75362 17.7912 4.8758 17.8156 4.99918 17.8156C5.12257 17.8156 5.24475 17.7912 5.3587 17.7439C5.47266 17.6966 5.57615 17.6272 5.66325 17.5398L10.0382 13.1648C10.1256 13.0777 10.195 12.9743 10.2423 12.8603C10.2896 12.7463 10.314 12.6242 10.314 12.5008C10.314 12.3774 10.2896 12.2552 10.2423 12.1413C10.195 12.0273 10.1256 11.9238 10.0382 11.8367Z" fill="#727674"/>
      </svg>
    ),
  }
  return icons[status] ? icons[status]() : icons.Pending()
}

export default function AssignWorker() {
  const [activeFilter, setActiveFilter] = useState('All')
  const [searchTerm, setSearchTerm] = useState('')
  const [showAssignModal, setShowAssignModal] = useState(false)
  const [selectedOrder, setSelectedOrder] = useState(null)

  const availableTechnicians = [
    { id: 1, name: 'Jso', role: 'Engineer Repair' },
    { id: 2, name: 'Jso', role: 'Engineer Repair' },
    { id: 3, name: 'Jso', role: 'Engineer Repair' },
    { id: 4, name: 'Jso', role: 'Engineer Repair' },
    { id: 5, name: 'Jso', role: 'Engineer Repair' },
  ]

  const [orders, setOrders] = useState([
    {
      id: 'RO-002',
      vehicle: 'VinFast VF-3',
      status: 'Pending',
      priority: 'HIGH',
      vin: 'LSV1E7AL0MC123456',
      customer: 'Andrew',
      date: 'July 21, 2025',
      issue: 'Battery thermal management system showing error codes. Customer reports reduced range and charging speed.',
    },
    {
      id: 'RO-003',
      vehicle: 'VinFast VF-3',
      status: 'Completed',
      priority: 'HIGH',
      vin: 'LSV1E7AL0MC123456',
      customer: 'Andrew',
      date: 'July 21, 2025',
      issue: 'Battery thermal management system showing error codes. Customer reports reduced range and charging speed.',
      technician: 'Jso',
    },
    {
      id: 'RO-004',
      vehicle: 'VinFast VF-3',
      status: 'Assigned',
      priority: 'MEDIUM',
      vin: 'LSV1E7AL0MC123456',
      customer: 'Andrew',
      date: 'July 21, 2025',
      issue: 'Battery thermal management system showing error codes. Customer reports reduced range and charging speed.',
      technician: 'Jso',
    },
    {
      id: 'RO-005',
      vehicle: 'VinFast VF-3',
      status: 'Assigned',
      priority: 'MEDIUM',
      vin: 'LSV1E7AL0MC123456',
      customer: 'Andrew',
      date: 'July 21, 2025',
      issue: 'Battery thermal management system showing error codes. Customer reports reduced range and charging speed.',
      technician: 'Jso',
    },
    {
      id: 'RO-006',
      vehicle: 'VinFast VF-3',
      status: 'In Progress',
      priority: 'LOW',
      vin: 'LSV1E7AL0MC123456',
      customer: 'Andrew',
      date: 'July 21, 2025',
      issue: 'Battery thermal management system showing error codes. Customer reports reduced range and charging speed.',
      technician: 'Jso',
    },
    {
      id: 'RO-007',
      vehicle: 'VinFast VF-3',
      status: 'In Progress',
      priority: 'HIGH',
      vin: 'LSV1E7AL0MC123456',
      customer: 'Andrew',
      date: 'July 21, 2025',
      issue: 'Battery thermal management system showing error codes. Customer reports reduced range and charging speed.',
      technician: 'Jso',
    },
  ])

  const workOrders = orders

  // Calculate stats from orders
  const pendingCount = orders.filter(o => o.status === 'Pending').length
  const assignedCount = orders.filter(o => o.status === 'Assigned').length
  const inProgressCount = orders.filter(o => o.status === 'In Progress').length
  const completedCount = orders.filter(o => o.status === 'Completed').length

  const stats = [
    { count: pendingCount.toString(), label: 'Pending', description: 'Awaiting assignment', color: 'text-[#979AA3]' },
    { count: assignedCount.toString(), label: 'Assigned', description: 'Ready to start', color: 'text-[#0FC3EB]' },
    { count: inProgressCount.toString(), label: 'In Progress', description: 'Being worked on', color: 'text-[#EBB80F]' },
    { count: completedCount.toString(), label: 'Completed', description: 'Finished today', color: 'text-[#54C020]' },
  ]

  const filters = ['All', 'Pending', 'Assigned', 'In Progress', 'Completed']

  // Filter orders based on active filter and search term
  const filteredOrders = useMemo(() => {
    return workOrders.filter(order => {
      const matchesFilter = activeFilter === 'All' || order.status === activeFilter
      const matchesSearch = searchTerm === '' || 
        order.id.toLowerCase().includes(searchTerm.toLowerCase()) ||
        order.vehicle.toLowerCase().includes(searchTerm.toLowerCase()) ||
        order.customer.toLowerCase().includes(searchTerm.toLowerCase())
      return matchesFilter && matchesSearch
    })
  }, [workOrders, activeFilter, searchTerm])

  return (
    <div className="min-h-screen bg-white p-6 md:p-12">
      {/* Header */}
      <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8">
        <div>
          <h1 className="text-[30px] font-semibold mb-1">Hello, SC Staff!</h1>
          <p className="text-xl text-[#929594] font-semibold">An overview of your works.</p>
        </div>
        <div className="flex items-center gap-3">
          <span className="text-[17px] font-semibold text-[#393C3B]">16 May, 2025</span>
          <div className="w-[45px] h-[45px] rounded-full bg-[#F1F3F4] flex items-center justify-center">
            <svg width="25" height="25" viewBox="0 0 25 25" fill="none">
              <path d="M20.3125 3.125H17.9688V2.34375C17.9688 2.13655 17.8864 1.93784 17.7399 1.79132C17.5934 1.64481 17.3947 1.5625 17.1875 1.5625C16.9803 1.5625 16.7816 1.64481 16.6351 1.79132C16.4886 1.93784 16.4062 2.13655 16.4062 2.34375V3.125H8.59375V2.34375C8.59375 2.13655 8.51144 1.93784 8.36493 1.79132C8.21841 1.64481 8.0197 1.5625 7.8125 1.5625C7.6053 1.5625 7.40659 1.64481 7.26007 1.79132C7.11356 1.93784 7.03125 2.13655 7.03125 2.34375V3.125H4.6875C4.2731 3.125 3.87567 3.28962 3.58265 3.58265C3.28962 3.87567 3.125 4.2731 3.125 4.6875V20.3125C3.125 20.7269 3.28962 21.1243 3.58265 21.4174C3.87567 21.7104 4.2731 21.875 4.6875 21.875H20.3125C20.7269 21.875 21.1243 21.7104 21.4174 21.4174C21.7104 21.1243 21.875 20.7269 21.875 20.3125V4.6875C21.875 4.2731 21.7104 3.87567 21.4174 3.58265C21.1243 3.28962 20.7269 3.125 20.3125 3.125ZM7.03125 4.6875V5.46875C7.03125 5.67595 7.11356 5.87466 7.26007 6.02118C7.40659 6.16769 7.6053 6.25 7.8125 6.25C8.0197 6.25 8.21841 6.16769 8.36493 6.02118C8.51144 5.87466 8.59375 5.67595 8.59375 5.46875V4.6875H16.4062V5.46875C16.4062 5.67595 16.4886 5.87466 16.6351 6.02118C16.7816 6.16769 16.9803 6.25 17.1875 6.25C17.3947 6.25 17.5934 6.16769 17.7399 6.02118C17.8864 5.87466 17.9688 5.67595 17.9688 5.46875V4.6875H20.3125V7.8125H4.6875V4.6875H7.03125ZM20.3125 20.3125H4.6875V9.375H20.3125V20.3125ZM13.6719 12.8906C13.6719 13.1224 13.6031 13.349 13.4744 13.5417C13.3456 13.7344 13.1626 13.8846 12.9485 13.9733C12.7343 14.062 12.4987 14.0852 12.2714 14.04C12.0441 13.9948 11.8352 13.8832 11.6714 13.7193C11.5075 13.5554 11.3959 13.3466 11.3506 13.1192C11.3054 12.8919 11.3286 12.6563 11.4173 12.4422C11.506 12.228 11.6562 12.045 11.8489 11.9162C12.0417 11.7875 12.2682 11.7188 12.5 11.7188C12.8108 11.7188 13.1089 11.8422 13.3286 12.062C13.5484 12.2818 13.6719 12.5798 13.6719 12.8906ZM17.9688 12.8906C17.9688 13.1224 17.9 13.349 17.7713 13.5417C17.6425 13.7344 17.4595 13.8846 17.2453 13.9733C17.0312 14.062 16.7956 14.0852 16.5683 14.04C16.3409 13.9948 16.1321 13.8832 15.9682 13.7193C15.8043 13.5554 15.6927 13.3466 15.6475 13.1192C15.6023 12.8919 15.6255 12.6563 15.7142 12.4422C15.8029 12.228 15.9531 12.045 16.1458 11.9162C16.3385 11.7875 16.5651 11.7188 16.7969 11.7188C17.1077 11.7188 17.4057 11.8422 17.6255 12.062C17.8453 12.2818 17.9688 12.5798 17.9688 12.8906ZM9.375 16.7969C9.375 17.0287 9.30627 17.2552 9.1775 17.4479C9.04874 17.6406 8.86571 17.7908 8.65158 17.8795C8.43745 17.9682 8.20182 17.9914 7.9745 17.9462C7.74718 17.901 7.53837 17.7894 7.37448 17.6255C7.21059 17.4616 7.09898 17.2528 7.05377 17.0255C7.00855 16.7982 7.03176 16.5626 7.12045 16.3484C7.20915 16.1343 7.35935 15.9513 7.55207 15.8225C7.74478 15.6937 7.97135 15.625 8.20312 15.625C8.51393 15.625 8.812 15.7485 9.03177 15.9682C9.25153 16.188 9.375 16.4861 9.375 16.7969ZM13.6719 16.7969C13.6719 17.0287 13.6031 17.2552 13.4744 17.4479C13.3456 17.6406 13.1626 17.7908 12.9485 17.8795C12.7343 17.9682 12.4987 17.9914 12.2714 17.9462C12.0441 17.901 11.8352 17.7894 11.6714 17.6255C11.5075 17.4616 11.3959 17.2528 11.3506 17.0255C11.3054 16.7982 11.3286 16.5626 11.4173 16.3484C11.506 16.1343 11.6562 15.9513 11.8489 15.8225C12.0417 15.6937 12.2682 15.625 12.5 15.625C12.8108 15.625 13.1089 15.7485 13.3286 15.9682C13.5484 16.188 13.6719 16.4861 13.6719 16.7969ZM17.9688 16.7969C17.9688 17.0287 17.9 17.2552 17.7713 17.4479C17.6425 17.6406 17.4595 17.7908 17.2453 17.8795C17.0312 17.9682 16.7956 17.9914 16.5683 17.9462C16.3409 17.901 16.1321 17.7894 15.9682 17.6255C15.8043 17.4616 15.6927 17.2528 15.6475 17.0255C15.6023 16.7982 15.6255 16.5626 15.7142 16.3484C15.8029 16.1343 15.9531 15.9513 16.1458 15.8225C16.3385 15.6937 16.5651 15.625 16.7969 15.625C17.1077 15.625 17.4057 15.7485 17.6255 15.9682C17.8453 16.188 17.9688 16.4861 17.9688 16.7969Z" fill="black"/>
            </svg>
          </div>
        </div>
      </div>

      {/* Stats Cards */}
      <div className="flex flex-wrap gap-4 mb-8">
        {stats.map((stat, index) => (
          <StatusCard key={index} {...stat} />
        ))}
      </div>

      {/* Work Orders Section */}
      <div className="mb-6">
        <h2 className="text-[25px] font-semibold mb-6">Work Orders (8)</h2>

        {/* Filters and Search */}
        <div className="flex flex-col lg:flex-row gap-4 mb-6">
          {/* Filter Tabs */}
          <div className="flex items-center gap-2 bg-[#F1F3F4] rounded-xl px-2 py-2 overflow-x-auto">
            {filters.map((filter) => {
              let count = orders.length
              if (filter === 'Pending') count = pendingCount
              if (filter === 'Assigned') count = assignedCount
              if (filter === 'In Progress') count = inProgressCount
              if (filter === 'Completed') count = completedCount
              
              return (
                <button
                  key={filter}
                  onClick={() => setActiveFilter(filter)}
                  className={`px-3 py-1.5 rounded-md text-sm font-semibold whitespace-nowrap transition-colors ${
                    activeFilter === filter
                      ? 'bg-[#626AE7] text-white'
                      : 'bg-transparent text-black hover:bg-white'
                  }`}
                >
                  {filter} {filter !== 'All' && `(${count})`}
                </button>
              )
            })}
          </div>

          {/* Priority Filter */}
          <div className="flex items-center gap-2 bg-[#F1F3F4] rounded-xl px-4 py-2 min-w-[113px]">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M13.5306 6.53025L8.5306 11.5302C8.46092 11.6002 8.37813 11.6556 8.28696 11.6935C8.1958 11.7314 8.09806 11.7508 7.99935 11.7508C7.90064 11.7508 7.8029 11.7314 7.71173 11.6935C7.62057 11.6556 7.53778 11.6002 7.4681 11.5302L2.4681 6.53025C2.3272 6.38935 2.24805 6.19825 2.24805 5.999C2.24805 5.79974 2.3272 5.60864 2.4681 5.46775C2.60899 5.32685 2.80009 5.2477 2.99935 5.2477C3.19861 5.2477 3.3897 5.32685 3.5306 5.46775L7.99997 9.93712L12.4693 5.46712C12.6102 5.32623 12.8013 5.24707 13.0006 5.24707C13.1999 5.24707 13.391 5.32623 13.5318 5.46712C13.6727 5.60802 13.7519 5.79911 13.7519 5.99837C13.7519 6.19763 13.6727 6.38873 13.5318 6.52962L13.5306 6.53025Z" fill="#929594"/>
            </svg>
            <span className="text-sm font-semibold text-[#929594]">All Priority</span>
          </div>

          {/* Search */}
          <div className="flex items-center gap-2 bg-[#F1F3F4] rounded-xl px-4 py-2 flex-1 max-w-[220px]">
            <svg width="23" height="23" viewBox="0 0 23 23" fill="none">
              <path d="M20.8878 19.3618L16.6212 15.0933C17.9004 13.4262 18.4977 11.335 18.2918 9.24372C18.0859 7.15247 17.0922 5.21785 15.5123 3.8323C13.9325 2.44674 11.8847 1.71402 9.7845 1.78275C7.68426 1.85149 5.6888 2.71654 4.20292 4.20243C2.71703 5.68831 1.85198 7.68377 1.78324 9.78401C1.71451 11.8842 2.44723 13.932 3.83278 15.5119C5.21834 17.0917 7.15296 18.0854 9.24421 18.2913C11.3355 18.4972 13.4267 17.9 15.0938 16.6207L19.3641 20.8918C19.4644 20.9921 19.5834 21.0717 19.7145 21.1259C19.8455 21.1802 19.9859 21.2082 20.1278 21.2082C20.2696 21.2082 20.41 21.1802 20.5411 21.1259C20.6721 21.0717 20.7911 20.9921 20.8914 20.8918C20.9917 20.7915 21.0713 20.6725 21.1255 20.5415C21.1798 20.4104 21.2078 20.27 21.2078 20.1282C21.2078 19.9863 21.1798 19.8459 21.1255 19.7149C21.0713 19.5838 20.9917 19.4648 20.8914 19.3645L20.8878 19.3618ZM3.95319 10.0621C3.95319 8.85375 4.31149 7.67257 4.9828 6.66788C5.65411 5.6632 6.60826 4.88015 7.7246 4.41775C8.84095 3.95534 10.0693 3.83436 11.2544 4.07009C12.4395 4.30582 13.5281 4.88768 14.3825 5.74209C15.237 6.5965 15.8188 7.68509 16.0545 8.87019C16.2903 10.0553 16.1693 11.2837 15.7069 12.4C15.2445 13.5164 14.4614 14.4705 13.4567 15.1418C12.4521 15.8131 11.2709 16.1714 10.0626 16.1714C8.44276 16.1698 6.88979 15.5256 5.74442 14.3802C4.59905 13.2348 3.95485 11.6819 3.95319 10.0621Z" fill="#929594"/>
            </svg>
            <input 
              type="text" 
              placeholder="Search..." 
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="bg-transparent outline-none text-sm font-semibold text-[#929594] placeholder-[#929594] flex-1"
            />
          </div>
        </div>

        {/* Work Order Cards Grid or Empty State */}
        {filteredOrders.length > 0 ? (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {filteredOrders.map((order, index) => (
              <WorkOrderCard 
                key={index} 
                order={order} 
                onAssignClick={(order) => {
                  setSelectedOrder(order)
                  setShowAssignModal(true)
                }}
              />
            ))}
          </div>
        ) : (
          <div className="flex flex-col items-center justify-center py-20 bg-[#F8F9FA] rounded-2xl">
            <div className="w-16 h-16 rounded-full bg-[#E5E5E5] flex items-center justify-center mb-4">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <circle cx="16" cy="16" r="2" fill="#727674"/>
                <circle cx="16" cy="10" r="1.5" fill="#727674"/>
                <circle cx="16" cy="22" r="1.5" fill="#727674"/>
              </svg>
            </div>
            <h3 className="text-xl font-semibold text-black mb-2">No Order Found</h3>
            <p className="text-sm text-[#929594]">Try adjusting your search or filters</p>
          </div>
        )}
      </div>

      {/* Assign Technician Modal */}
      {showAssignModal && selectedOrder && (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50" onClick={() => setShowAssignModal(false)}>
          <div className="bg-white rounded-3xl p-6 w-full max-w-md mx-4 shadow-2xl" onClick={(e) => e.stopPropagation()}>
            {/* Modal Header */}
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold">Assign Technician for order {selectedOrder.id}</h3>
              <button 
                onClick={() => setShowAssignModal(false)}
                className="w-8 h-8 rounded-full hover:bg-gray-100 flex items-center justify-center transition-colors"
              >
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <path d="M15 5L5 15M5 5L15 15" stroke="#929594" strokeWidth="2" strokeLinecap="round"/>
                </svg>
              </button>
            </div>

            {/* Vehicle Info */}
            <div className="bg-[#FFE4E4] rounded-2xl p-4 mb-4">
              <div className="flex items-center gap-3 mb-2">
                <div className="w-10 h-10 rounded-xl bg-[#E1E3FF] flex items-center justify-center">
                  <svg width="25" height="25" viewBox="0 0 25 25" fill="none">
                    <path d="M23.0469 10.5469H20.8008L16.6826 6.43165C16.5017 6.24966 16.2866 6.10537 16.0495 6.00714C15.8125 5.90891 15.5583 5.85869 15.3018 5.85938H4.71485C4.39329 5.85944 4.07672 5.93889 3.79324 6.09068C3.50977 6.24247 3.26815 6.4619 3.08985 6.7295L0.195315 11.0684C0.0674461 11.2611 -0.000511898 11.4874 2.90329e-06 11.7188V16.4063C2.90329e-06 16.9243 0.205778 17.421 0.57206 17.7873C0.938342 18.1536 1.43513 18.3594 1.95313 18.3594H3.27149C3.48013 19.0383 3.90098 19.6325 4.47224 20.0545C5.0435 20.4766 5.73505 20.7044 6.44532 20.7044C7.15558 20.7044 7.84713 20.4766 8.41839 20.0545C8.98965 19.6325 9.4105 19.0383 9.61914 18.3594H15.3809C15.5895 19.0383 16.0104 19.6325 16.5816 20.0545C17.1529 20.4766 17.8444 20.7044 18.5547 20.7044C19.265 20.7044 19.9565 20.4766 20.5278 20.0545C21.099 19.6325 21.5199 19.0383 21.7285 18.3594H23.0469C23.5649 18.3594 24.0617 18.1536 24.4279 17.7873C24.7942 17.421 25 16.9243 25 16.4063V12.5C25 11.982 24.7942 11.4852 24.4279 11.1189C24.0617 10.7527 23.5649 10.5469 23.0469 10.5469Z" fill="#626AE7"/>
                  </svg>
                </div>
                <div>
                  <h4 className="font-semibold text-base">{selectedOrder.vehicle}</h4>
                  <p className="text-xs text-[#929594]">{selectedOrder.issue}</p>
                </div>
              </div>
            </div>

            {/* Available Technicians */}
            <div className="mb-4">
              <p className="text-sm font-semibold mb-3">Available Technicians ({availableTechnicians.length} active)</p>
              <div className="space-y-2 max-h-[300px] overflow-y-auto">
                {availableTechnicians.map((tech) => (
                  <label 
                    key={tech.id}
                    htmlFor={`tech-${tech.id}`}
                    className="flex items-center gap-3 p-3 border border-[#E5E5E5] rounded-xl hover:bg-gray-50 cursor-pointer transition-colors"
                  >
                    <input 
                      type="radio" 
                      name="technician"
                      id={`tech-${tech.id}`}
                      className="w-5 h-5 appearance-none border-2 border-gray-300 rounded-full checked:border-[#626AE7] checked:border-[6px] transition-all cursor-pointer"
                    />
                    <div className="w-10 h-10 rounded-full bg-[#E1E3FF] flex items-center justify-center flex-shrink-0">
                      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M10 10C11.3261 10 12.5979 9.47322 13.5355 8.53553C14.4732 7.59785 15 6.32608 15 5C15 3.67392 14.4732 2.40215 13.5355 1.46447C12.5979 0.526784 11.3261 0 10 0C8.67392 0 7.40215 0.526784 6.46447 1.46447C5.52678 2.40215 5 3.67392 5 5C5 6.32608 5.52678 7.59785 6.46447 8.53553C7.40215 9.47322 8.67392 10 10 10ZM10 12.5C6.66 12.5 0 14.175 0 17.5V20H20V17.5C20 14.175 13.34 12.5 10 12.5Z" fill="#626AE7"/>
                      </svg>
                    </div>
                    <div className="flex-1">
                      <div className="font-semibold text-sm">{tech.name}</div>
                      <div className="text-xs text-[#929594]">{tech.role}</div>
                    </div>
                  </label>
                ))}
              </div>
            </div>

            {/* Action Buttons */}
            <div className="flex gap-3">
              <button 
                onClick={() => setShowAssignModal(false)}
                className="flex-1 py-3 border border-[#E5E5E5] rounded-2xl text-sm font-semibold hover:bg-gray-50 transition-colors"
              >
                Cancel
              </button>
              <button 
                onClick={() => {
                  // Get selected technician
                  const selectedTechInput = document.querySelector('input[name="technician"]:checked')
                  if (selectedTechInput) {
                    const techId = parseInt(selectedTechInput.id.replace('tech-', ''))
                    const selectedTech = availableTechnicians.find(t => t.id === techId)
                    
                    // Update the order with assigned technician
                    setOrders(orders.map(order => 
                      order.id === selectedOrder.id 
                        ? { ...order, status: 'Assigned', technician: selectedTech.name }
                        : order
                    ))
                  }
                  setShowAssignModal(false)
                }}
                className="flex-1 py-3 bg-[#626AE7] text-white rounded-2xl text-sm font-semibold hover:bg-[#5159d6] transition-colors"
              >
                Assign
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
